---
{"dg-publish":true,"permalink":"/projects/dallas-confluent-practice/notes/k-streams-and-k-tables-simple-operations-stateless-202406021532/","tags":["üìñ","‚ô£Ô∏è/kafka"],"created":"2024-08-29T16:38:54.923-05:00","updated":"2024-11-08T09:43:56.889-06:00"}
---

# KStreams and KTables Simple Operations (Stateless)

## KStream And KTables

### Kstreams

- All inserts
- Similar to a log
- Infinite
- Unbounded data streams

<style> .container {font-family: sans-serif; text-align: center;} .button-wrapper button {z-index: 1;height: 40px; width: 100px; margin: 10px;padding: 5px;} .excalidraw .App-menu_top .buttonList { display: flex;} .excalidraw-wrapper { height: 800px; margin: 50px; position: relative;} :root[dir="ltr"] .excalidraw .layer-ui__wrapper .zen-mode-transition.App-menu_bottom--transition-left {transform: none;} </style><script src="https://cdn.jsdelivr.net/npm/react@17/umd/react.production.min.js"></script><script src="https://cdn.jsdelivr.net/npm/react-dom@17/umd/react-dom.production.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@excalidraw/excalidraw@0/dist/excalidraw.production.min.js"></script><div id="Apache_Kafka_Series_-_Learn_Apache_Kafka_for_Beginners_v3_-_202302211109_202403311133excalidraw.md1"></div><script>(function(){const InitialData={"type":"excalidraw","version":2,"source":"https://github.com/zsviczian/obsidian-excalidraw-plugin/releases/tag/2.0.26","elements":[{"id":"7NvUWttre1_iP0RrjlGaD","type":"rectangle","x":-378.01415252685547,"y":-571.856559753418,"width":325.8948974609375,"height":131.45343017578125,"angle":0,"strokeColor":"#2f9e44","backgroundColor":"transparent","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"groupIds":[],"frameId":null,"roundness":{"type":3},"seed":601179714,"version":138,"versionNonce":1835017950,"isDeleted":false,"boundElements":[{"type":"text","id":"lQPymulA"},{"id":"1R03Lf-nIobUJmEdEH6bN","type":"arrow"}],"updated":1711902984995,"link":null,"locked":false},{"id":"lQPymulA","type":"text","x":-247.21668243408203,"y":-518.6298446655273,"width":64.29995727539062,"height":25,"angle":0,"strokeColor":"#2f9e44","backgroundColor":"transparent","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"groupIds":[],"frameId":null,"roundness":null,"seed":572557214,"version":98,"versionNonce":893435394,"isDeleted":false,"boundElements":null,"updated":1711902984995,"link":null,"locked":false,"text":"Alice, 1","rawText":"Alice, 1","fontSize":20,"fontFamily":1,"textAlign":"center","verticalAlign":"middle","containerId":"7NvUWttre1_iP0RrjlGaD","originalText":"Alice, 1","lineHeight":1.25},{"type":"rectangle","version":448,"versionNonce":423031518,"isDeleted":false,"id":"ep67PXTqw4PTUwZe2wLLI","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-380.8188705444336,"y":-182.30403900146484,"strokeColor":"#1971c2","backgroundColor":"transparent","width":325.8948974609375,"height":131.45343017578125,"seed":693247490,"groupIds":[],"frameId":null,"roundness":{"type":3},"boundElements":[{"type":"text","id":"n9pjAwoO"},{"id":"haKSET8YQDVgbLxu_ehrZ","type":"arrow"}],"updated":1711902997680,"link":null,"locked":false},{"type":"text","version":416,"versionNonce":1775298334,"isDeleted":false,"id":"n9pjAwoO","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-255.49140167236328,"y":-129.07732391357422,"strokeColor":"#1971c2","backgroundColor":"transparent","width":75.23995971679688,"height":25,"seed":1260588482,"groupIds":[],"frameId":null,"roundness":null,"boundElements":[],"updated":1711902997680,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"Marc, 4","rawText":"Marc, 4","textAlign":"center","verticalAlign":"middle","containerId":"ep67PXTqw4PTUwZe2wLLI","originalText":"Marc, 4","lineHeight":1.25},{"type":"rectangle","version":355,"versionNonce":463802754,"isDeleted":false,"id":"f7bmFNOUDfco4rMiDV22Y","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-398.2921371459961,"y":322.90384674072266,"strokeColor":"#2f9e44","backgroundColor":"transparent","width":325.8948974609375,"height":131.45343017578125,"seed":1939400834,"groupIds":[],"frameId":null,"roundness":{"type":3},"boundElements":[{"type":"text","id":"ozOIJ0tY"},{"id":"m4Nppw3yIba1j3kAhUwIU","type":"arrow"}],"updated":1711903009370,"link":null,"locked":false},{"type":"text","version":325,"versionNonce":705707934,"isDeleted":false,"id":"ozOIJ0tY","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-271.9046630859375,"y":376.1305618286133,"strokeColor":"#2f9e44","backgroundColor":"transparent","width":73.11994934082031,"height":25,"seed":1730971714,"groupIds":[],"frameId":null,"roundness":null,"boundElements":[],"updated":1711903009370,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"Alice, 2","rawText":"Alice, 2","textAlign":"center","verticalAlign":"middle","containerId":"f7bmFNOUDfco4rMiDV22Y","originalText":"Alice, 2","lineHeight":1.25},{"id":"KqbGBlkvau2D2hV5hdSpG","type":"line","x":-12.865776062011719,"y":-723.474479675293,"width":0,"height":1238.765869140625,"angle":0,"strokeColor":"#1e1e1e","backgroundColor":"transparent","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"groupIds":[],"frameId":null,"roundness":{"type":2},"seed":1198261250,"version":267,"versionNonce":483872990,"isDeleted":false,"boundElements":null,"updated":1711902936383,"link":null,"locked":false,"points":[[0,0],[0,1238.765869140625]],"lastCommittedPoint":null,"startBinding":null,"endBinding":null,"startArrowhead":null,"endArrowhead":null},{"type":"rectangle","version":308,"versionNonce":192683714,"isDeleted":false,"id":"hMDU59vmj9-Jv2yKGmFZN","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":48.67609405517578,"y":-574.1156234741211,"strokeColor":"#2f9e44","backgroundColor":"transparent","width":325.8948974609375,"height":131.45343017578125,"seed":910799070,"groupIds":[],"frameId":null,"roundness":{"type":3},"boundElements":[{"type":"text","id":"Up245k6Y"},{"id":"1R03Lf-nIobUJmEdEH6bN","type":"arrow"}],"updated":1711902981858,"link":null,"locked":false},{"type":"text","version":268,"versionNonce":283879006,"isDeleted":false,"id":"Up245k6Y","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":179.47356414794922,"y":-520.8889083862305,"strokeColor":"#2f9e44","backgroundColor":"transparent","width":64.29995727539062,"height":25,"seed":299623710,"groupIds":[],"frameId":null,"roundness":null,"boundElements":[],"updated":1711902981858,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"Alice, 1","rawText":"Alice, 1","textAlign":"center","verticalAlign":"middle","containerId":"hMDU59vmj9-Jv2yKGmFZN","originalText":"Alice, 1","lineHeight":1.25},{"type":"rectangle","version":237,"versionNonce":770043422,"isDeleted":false,"id":"PN7T9UyfKPILqPzyODRat","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":43.84052276611328,"y":-322.3434066772461,"strokeColor":"#2f9e44","backgroundColor":"transparent","width":325.8948974609375,"height":131.45343017578125,"seed":1924329282,"groupIds":[],"frameId":null,"roundness":{"type":3},"boundElements":[{"type":"text","id":"Xc5qxyFa"},{"id":"haKSET8YQDVgbLxu_ehrZ","type":"arrow"}],"updated":1711903004666,"link":null,"locked":false},{"type":"text","version":197,"versionNonce":1568569950,"isDeleted":false,"id":"Xc5qxyFa","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":174.63799285888672,"y":-269.11669158935547,"strokeColor":"#2f9e44","backgroundColor":"transparent","width":64.29995727539062,"height":25,"seed":1792521986,"groupIds":[],"frameId":null,"roundness":null,"boundElements":[],"updated":1711903004666,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"Alice, 1","rawText":"Alice, 1","textAlign":"center","verticalAlign":"middle","containerId":"PN7T9UyfKPILqPzyODRat","originalText":"Alice, 1","lineHeight":1.25},{"type":"rectangle","version":415,"versionNonce":132868162,"isDeleted":false,"id":"cF3QEOycWHXUSUZh7ONTr","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":44.91767120361328,"y":-177.6167221069336,"strokeColor":"#1971c2","backgroundColor":"transparent","width":325.8948974609375,"height":131.45343017578125,"seed":558651074,"groupIds":[],"frameId":null,"roundness":{"type":3},"boundElements":[{"type":"text","id":"EpufPdvz"},{"id":"haKSET8YQDVgbLxu_ehrZ","type":"arrow"}],"updated":1711903001641,"link":null,"locked":false},{"type":"text","version":385,"versionNonce":1292874974,"isDeleted":false,"id":"EpufPdvz","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":170.2451400756836,"y":-124.39000701904297,"strokeColor":"#1971c2","backgroundColor":"transparent","width":75.23995971679688,"height":25,"seed":1624780418,"groupIds":[],"frameId":null,"roundness":null,"boundElements":[],"updated":1711903001641,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"Marc, 4","rawText":"Marc, 4","textAlign":"center","verticalAlign":"middle","containerId":"cF3QEOycWHXUSUZh7ONTr","originalText":"Marc, 4","lineHeight":1.25},{"type":"rectangle","version":306,"versionNonce":1842057538,"isDeleted":false,"id":"q129xgDKefpcoEPx50a9z","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":48.41382598876953,"y":42.625892639160156,"strokeColor":"#2f9e44","backgroundColor":"transparent","width":325.8948974609375,"height":131.45343017578125,"seed":1474225858,"groupIds":[],"frameId":null,"roundness":{"type":3},"boundElements":[{"type":"text","id":"KJuEewCr"}],"updated":1711903009370,"link":null,"locked":false},{"type":"text","version":267,"versionNonce":1398971358,"isDeleted":false,"id":"KJuEewCr","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":179.21129608154297,"y":95.85260772705078,"strokeColor":"#2f9e44","backgroundColor":"transparent","width":64.29995727539062,"height":25,"seed":1184415362,"groupIds":[],"frameId":null,"roundness":null,"boundElements":[],"updated":1711903009370,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"Alice, 1","rawText":"Alice, 1","textAlign":"center","verticalAlign":"middle","containerId":"q129xgDKefpcoEPx50a9z","originalText":"Alice, 1","lineHeight":1.25},{"type":"rectangle","version":487,"versionNonce":1551663262,"isDeleted":false,"id":"VF8GD--4MSg2oVQZCt3KU","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":44.92664337158203,"y":187.35257720947266,"strokeColor":"#1971c2","backgroundColor":"transparent","width":325.8948974609375,"height":131.45343017578125,"seed":935435842,"groupIds":[],"frameId":null,"roundness":{"type":3},"boundElements":[{"type":"text","id":"f6oyPjwK"}],"updated":1711903011539,"link":null,"locked":false},{"type":"text","version":458,"versionNonce":402645058,"isDeleted":false,"id":"f6oyPjwK","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":170.25411224365234,"y":240.57929229736328,"strokeColor":"#1971c2","backgroundColor":"transparent","width":75.23995971679688,"height":25,"seed":406357506,"groupIds":[],"frameId":null,"roundness":null,"boundElements":[],"updated":1711903011539,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"Marc, 4","rawText":"Marc, 4","textAlign":"center","verticalAlign":"middle","containerId":"VF8GD--4MSg2oVQZCt3KU","originalText":"Marc, 4","lineHeight":1.25},{"type":"rectangle","version":404,"versionNonce":2123110658,"isDeleted":false,"id":"-9Ia6WlBEBNLJY4h6QJdb","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":42.66419219970703,"y":328.7931900024414,"strokeColor":"#2f9e44","backgroundColor":"transparent","width":325.8948974609375,"height":131.45343017578125,"seed":1753718274,"groupIds":[],"frameId":null,"roundness":{"type":3},"boundElements":[{"type":"text","id":"zPOwGpKN"},{"id":"m4Nppw3yIba1j3kAhUwIU","type":"arrow"}],"updated":1711903009370,"link":null,"locked":false},{"type":"text","version":374,"versionNonce":312438814,"isDeleted":false,"id":"zPOwGpKN","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":169.05166625976562,"y":382.01990509033203,"strokeColor":"#2f9e44","backgroundColor":"transparent","width":73.11994934082031,"height":25,"seed":128486850,"groupIds":[],"frameId":null,"roundness":null,"boundElements":[],"updated":1711903009370,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"Alice, 2","rawText":"Alice, 2","textAlign":"center","verticalAlign":"middle","containerId":"-9Ia6WlBEBNLJY4h6QJdb","originalText":"Alice, 2","lineHeight":1.25},{"id":"haKSET8YQDVgbLxu_ehrZ","type":"arrow","x":-46.64196014404297,"y":-114.69274341115036,"width":81.2454833984375,"height":0.05057638634693262,"angle":0,"strokeColor":"#1e1e1e","backgroundColor":"transparent","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"groupIds":[],"frameId":null,"roundness":{"type":2},"seed":413097886,"version":218,"versionNonce":1358706590,"isDeleted":false,"boundElements":null,"updated":1711902997680,"link":null,"locked":false,"points":[[0,0],[81.2454833984375,0.05057638634693262]],"lastCommittedPoint":null,"startBinding":{"elementId":"ep67PXTqw4PTUwZe2wLLI","focus":0.0297072465512409,"gap":8.282012939453125},"endBinding":{"elementId":"cF3QEOycWHXUSUZh7ONTr","focus":0.04016977983307118,"gap":10.31414794921875},"startArrowhead":null,"endArrowhead":"arrow"},{"type":"arrow","version":152,"versionNonce":166301662,"isDeleted":false,"id":"1R03Lf-nIobUJmEdEH6bN","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-43.43233587048019,"y":-509.01834629318716,"strokeColor":"#1e1e1e","backgroundColor":"transparent","width":87.6356201171875,"height":0,"seed":1331047874,"groupIds":[],"frameId":null,"roundness":{"type":2},"boundElements":[],"updated":1711902966926,"link":null,"locked":false,"startBinding":{"elementId":"7NvUWttre1_iP0RrjlGaD","gap":8.68691919543781,"focus":-0.04394714727180993},"endBinding":{"elementId":"hMDU59vmj9-Jv2yKGmFZN","gap":4.4728098084684405,"focus":0.009576591590116791},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[87.6356201171875,0]]},{"type":"arrow","version":123,"versionNonce":571191518,"isDeleted":false,"id":"m4Nppw3yIba1j3kAhUwIU","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-53.91750432751141,"y":388.98862234389577,"strokeColor":"#1e1e1e","backgroundColor":"transparent","width":83.98413085937494,"height":0.142644540940978,"seed":151991838,"groupIds":[],"frameId":null,"roundness":{"type":2},"boundElements":[],"updated":1711902966927,"link":null,"locked":false,"startBinding":{"elementId":"f7bmFNOUDfco4rMiDV22Y","gap":18.479735357547185,"focus":-0.001409376805368635},"endBinding":{"elementId":"-9Ia6WlBEBNLJY4h6QJdb","gap":12.59756566784344,"focus":0.07712442597813057},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[83.98413085937494,0.142644540940978]]},{"id":"vHM0SsCw","type":"text","x":-313.92284393310547,"y":-698.305778503418,"width":173.05984497070312,"height":25,"angle":0,"strokeColor":"#1e1e1e","backgroundColor":"transparent","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"groupIds":[],"frameId":null,"roundness":null,"seed":1656539650,"version":71,"versionNonce":144447490,"isDeleted":false,"boundElements":null,"updated":1711902965542,"link":null,"locked":false,"text":"Topic (key, value)","rawText":"Topic (key, value)","fontSize":20,"fontFamily":1,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"Topic (key, value)","lineHeight":1.25},{"type":"text","version":184,"versionNonce":1653244446,"isDeleted":false,"id":"9V0YI39C","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":170.10948944091797,"y":-706.5700607299805,"strokeColor":"#1e1e1e","backgroundColor":"transparent","width":81.25993347167969,"height":25,"seed":693337986,"groupIds":[],"frameId":null,"roundness":null,"boundElements":[],"updated":1711902972701,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"KStream","rawText":"KStream","textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"KStream","lineHeight":1.25}],"appState":{"theme":"dark","viewBackgroundColor":"#ffffff","currentItemStrokeColor":"#1971c2","currentItemBackgroundColor":"transparent","currentItemFillStyle":"solid","currentItemStrokeWidth":2,"currentItemStrokeStyle":"solid","currentItemRoughness":1,"currentItemOpacity":100,"currentItemFontFamily":1,"currentItemFontSize":20,"currentItemTextAlign":"left","currentItemStartArrowhead":null,"currentItemEndArrowhead":"arrow","scrollX":712.781005859375,"scrollY":1022.4317626953125,"zoom":{"value":1},"currentItemRoundness":"round","gridSize":null,"gridColor":{"Bold":"#C9C9C9FF","Regular":"#EDEDEDFF"},"currentStrokeOptions":null,"previousGridSize":null,"frameRendering":{"enabled":true,"clip":true,"name":true,"outline":true}},"files":{}};InitialData.scrollToContent=true;App=()=>{const e=React.useRef(null),t=React.useRef(null),[n,i]=React.useState({width:void 0,height:void 0});return React.useEffect(()=>{i({width:t.current.getBoundingClientRect().width,height:t.current.getBoundingClientRect().height});const e=()=>{i({width:t.current.getBoundingClientRect().width,height:t.current.getBoundingClientRect().height})};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[t]),React.createElement(React.Fragment,null,React.createElement("div",{className:"excalidraw-wrapper",ref:t},React.createElement(ExcalidrawLib.Excalidraw,{ref:e,width:n.width,height:n.height,initialData:InitialData,viewModeEnabled:!0,zenModeEnabled:!0,gridModeEnabled:!1})))},excalidrawWrapper=document.getElementById("Apache_Kafka_Series_-_Learn_Apache_Kafka_for_Beginners_v3_-_202302211109_202403311133excalidraw.md1");ReactDOM.render(React.createElement(App),excalidrawWrapper);})();</script>


### KTables

- All upserts on non null values
- Deletes on null values
- Similar to a table
- Parallel with log compacted topics

<div id="Apache_Kafka_Series_-_Learn_Apache_Kafka_for_Beginners_v3_-_202302211109_202403311138excalidraw.md2"></div><script>(function(){const InitialData={"type":"excalidraw","version":2,"source":"https://github.com/zsviczian/obsidian-excalidraw-plugin/releases/tag/2.0.26","elements":[{"type":"rectangle","version":138,"versionNonce":1835017950,"isDeleted":false,"id":"7NvUWttre1_iP0RrjlGaD","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-378.01415252685547,"y":-571.856559753418,"strokeColor":"#2f9e44","backgroundColor":"transparent","width":325.8948974609375,"height":131.45343017578125,"seed":601179714,"groupIds":[],"frameId":null,"roundness":{"type":3},"boundElements":[{"type":"text","id":"lQPymulA"},{"id":"1R03Lf-nIobUJmEdEH6bN","type":"arrow"}],"updated":1711902984995,"link":null,"locked":false},{"type":"text","version":98,"versionNonce":893435394,"isDeleted":false,"id":"lQPymulA","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-247.21668243408203,"y":-518.6298446655273,"strokeColor":"#2f9e44","backgroundColor":"transparent","width":64.29995727539062,"height":25,"seed":572557214,"groupIds":[],"frameId":null,"roundness":null,"boundElements":[],"updated":1711902984995,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"Alice, 1","rawText":"Alice, 1","textAlign":"center","verticalAlign":"middle","containerId":"7NvUWttre1_iP0RrjlGaD","originalText":"Alice, 1","lineHeight":1.25},{"type":"rectangle","version":448,"versionNonce":423031518,"isDeleted":false,"id":"ep67PXTqw4PTUwZe2wLLI","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-380.8188705444336,"y":-182.30403900146484,"strokeColor":"#1971c2","backgroundColor":"transparent","width":325.8948974609375,"height":131.45343017578125,"seed":693247490,"groupIds":[],"frameId":null,"roundness":{"type":3},"boundElements":[{"type":"text","id":"n9pjAwoO"},{"id":"haKSET8YQDVgbLxu_ehrZ","type":"arrow"}],"updated":1711902997680,"link":null,"locked":false},{"type":"text","version":416,"versionNonce":1775298334,"isDeleted":false,"id":"n9pjAwoO","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-255.49140167236328,"y":-129.07732391357422,"strokeColor":"#1971c2","backgroundColor":"transparent","width":75.23995971679688,"height":25,"seed":1260588482,"groupIds":[],"frameId":null,"roundness":null,"boundElements":[],"updated":1711902997680,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"Marc, 4","rawText":"Marc, 4","textAlign":"center","verticalAlign":"middle","containerId":"ep67PXTqw4PTUwZe2wLLI","originalText":"Marc, 4","lineHeight":1.25},{"type":"rectangle","version":468,"versionNonce":1629972958,"isDeleted":false,"id":"f7bmFNOUDfco4rMiDV22Y","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-380.86652081866634,"y":42.69998093664185,"strokeColor":"#2f9e44","backgroundColor":"transparent","width":325.8948974609375,"height":131.45343017578125,"seed":1939400834,"groupIds":[],"frameId":null,"roundness":{"type":3},"boundElements":[{"type":"text","id":"ozOIJ0tY"},{"id":"m4Nppw3yIba1j3kAhUwIU","type":"arrow"}],"updated":1711903160192,"link":null,"locked":false},{"type":"text","version":438,"versionNonce":1788509726,"isDeleted":false,"id":"ozOIJ0tY","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-254.47904675860775,"y":95.92669602453248,"strokeColor":"#2f9e44","backgroundColor":"transparent","width":73.11994934082031,"height":25,"seed":1730971714,"groupIds":[],"frameId":null,"roundness":null,"boundElements":[],"updated":1711903160192,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"Alice, 2","rawText":"Alice, 2","textAlign":"center","verticalAlign":"middle","containerId":"f7bmFNOUDfco4rMiDV22Y","originalText":"Alice, 2","lineHeight":1.25},{"type":"line","version":381,"versionNonce":1805599682,"isDeleted":false,"id":"KqbGBlkvau2D2hV5hdSpG","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-12.865776062011719,"y":-723.474479675293,"strokeColor":"#1e1e1e","backgroundColor":"transparent","width":8.704148513061227e-14,"height":1396.1963823596157,"seed":1198261250,"groupIds":[],"frameId":null,"roundness":{"type":2},"boundElements":[],"updated":1711903190505,"link":null,"locked":false,"startBinding":null,"endBinding":null,"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":null,"points":[[0,0],[-8.704148513061227e-14,1396.1963823596157]]},{"type":"rectangle","version":308,"versionNonce":192683714,"isDeleted":false,"id":"hMDU59vmj9-Jv2yKGmFZN","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":48.67609405517578,"y":-574.1156234741211,"strokeColor":"#2f9e44","backgroundColor":"transparent","width":325.8948974609375,"height":131.45343017578125,"seed":910799070,"groupIds":[],"frameId":null,"roundness":{"type":3},"boundElements":[{"type":"text","id":"Up245k6Y"},{"id":"1R03Lf-nIobUJmEdEH6bN","type":"arrow"}],"updated":1711902981858,"link":null,"locked":false},{"type":"text","version":268,"versionNonce":283879006,"isDeleted":false,"id":"Up245k6Y","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":179.47356414794922,"y":-520.8889083862305,"strokeColor":"#2f9e44","backgroundColor":"transparent","width":64.29995727539062,"height":25,"seed":299623710,"groupIds":[],"frameId":null,"roundness":null,"boundElements":[],"updated":1711902981858,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"Alice, 1","rawText":"Alice, 1","textAlign":"center","verticalAlign":"middle","containerId":"hMDU59vmj9-Jv2yKGmFZN","originalText":"Alice, 1","lineHeight":1.25},{"type":"rectangle","version":237,"versionNonce":770043422,"isDeleted":false,"id":"PN7T9UyfKPILqPzyODRat","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":43.84052276611328,"y":-322.3434066772461,"strokeColor":"#2f9e44","backgroundColor":"transparent","width":325.8948974609375,"height":131.45343017578125,"seed":1924329282,"groupIds":[],"frameId":null,"roundness":{"type":3},"boundElements":[{"type":"text","id":"Xc5qxyFa"},{"id":"haKSET8YQDVgbLxu_ehrZ","type":"arrow"}],"updated":1711903004666,"link":null,"locked":false},{"type":"text","version":197,"versionNonce":1568569950,"isDeleted":false,"id":"Xc5qxyFa","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":174.63799285888672,"y":-269.11669158935547,"strokeColor":"#2f9e44","backgroundColor":"transparent","width":64.29995727539062,"height":25,"seed":1792521986,"groupIds":[],"frameId":null,"roundness":null,"boundElements":[],"updated":1711903004666,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"Alice, 1","rawText":"Alice, 1","textAlign":"center","verticalAlign":"middle","containerId":"PN7T9UyfKPILqPzyODRat","originalText":"Alice, 1","lineHeight":1.25},{"type":"rectangle","version":415,"versionNonce":132868162,"isDeleted":false,"id":"cF3QEOycWHXUSUZh7ONTr","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":44.91767120361328,"y":-177.6167221069336,"strokeColor":"#1971c2","backgroundColor":"transparent","width":325.8948974609375,"height":131.45343017578125,"seed":558651074,"groupIds":[],"frameId":null,"roundness":{"type":3},"boundElements":[{"type":"text","id":"EpufPdvz"},{"id":"haKSET8YQDVgbLxu_ehrZ","type":"arrow"}],"updated":1711903001641,"link":null,"locked":false},{"type":"text","version":385,"versionNonce":1292874974,"isDeleted":false,"id":"EpufPdvz","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":170.2451400756836,"y":-124.39000701904297,"strokeColor":"#1971c2","backgroundColor":"transparent","width":75.23995971679688,"height":25,"seed":1624780418,"groupIds":[],"frameId":null,"roundness":null,"boundElements":[],"updated":1711903001641,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"Marc, 4","rawText":"Marc, 4","textAlign":"center","verticalAlign":"middle","containerId":"cF3QEOycWHXUSUZh7ONTr","originalText":"Marc, 4","lineHeight":1.25},{"type":"rectangle","version":307,"versionNonce":1880427998,"isDeleted":false,"id":"q129xgDKefpcoEPx50a9z","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":48.41382598876953,"y":42.625892639160156,"strokeColor":"#2f9e44","backgroundColor":"transparent","width":325.8948974609375,"height":131.45343017578125,"seed":1474225858,"groupIds":[],"frameId":null,"roundness":{"type":3},"boundElements":[{"type":"text","id":"KJuEewCr"},{"id":"m4Nppw3yIba1j3kAhUwIU","type":"arrow"}],"updated":1711903164587,"link":null,"locked":false},{"type":"text","version":269,"versionNonce":1525724702,"isDeleted":false,"id":"KJuEewCr","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":174.80130004882812,"y":95.85260772705078,"strokeColor":"#2f9e44","backgroundColor":"transparent","width":73.11994934082031,"height":25,"seed":1184415362,"groupIds":[],"frameId":null,"roundness":null,"boundElements":[],"updated":1711903172800,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"Alice, 2","rawText":"Alice, 2","textAlign":"center","verticalAlign":"middle","containerId":"q129xgDKefpcoEPx50a9z","originalText":"Alice, 2","lineHeight":1.25},{"type":"rectangle","version":487,"versionNonce":1551663262,"isDeleted":false,"id":"VF8GD--4MSg2oVQZCt3KU","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":44.92664337158203,"y":187.35257720947266,"strokeColor":"#1971c2","backgroundColor":"transparent","width":325.8948974609375,"height":131.45343017578125,"seed":935435842,"groupIds":[],"frameId":null,"roundness":{"type":3},"boundElements":[{"type":"text","id":"f6oyPjwK"}],"updated":1711903011539,"link":null,"locked":false},{"type":"text","version":458,"versionNonce":402645058,"isDeleted":false,"id":"f6oyPjwK","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":170.25411224365234,"y":240.57929229736328,"strokeColor":"#1971c2","backgroundColor":"transparent","width":75.23995971679688,"height":25,"seed":406357506,"groupIds":[],"frameId":null,"roundness":null,"boundElements":[],"updated":1711903011539,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"Marc, 4","rawText":"Marc, 4","textAlign":"center","verticalAlign":"middle","containerId":"VF8GD--4MSg2oVQZCt3KU","originalText":"Marc, 4","lineHeight":1.25},{"type":"arrow","version":234,"versionNonce":112081054,"isDeleted":false,"id":"haKSET8YQDVgbLxu_ehrZ","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-46.64196014404297,"y":-114.58694539865562,"strokeColor":"#1e1e1e","backgroundColor":"transparent","width":81.24548339843747,"height":0.017649653402301624,"seed":413097886,"groupIds":[],"frameId":null,"roundness":{"type":2},"boundElements":[],"updated":1711903230983,"link":null,"locked":false,"startBinding":{"elementId":"ep67PXTqw4PTUwZe2wLLI","gap":8.282012939453125,"focus":0.0297072465512409},"endBinding":{"elementId":"cF3QEOycWHXUSUZh7ONTr","gap":10.31414794921875,"focus":0.04016977983307118},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[81.24548339843747,0.017649653402301624]]},{"type":"arrow","version":168,"versionNonce":257894430,"isDeleted":false,"id":"1R03Lf-nIobUJmEdEH6bN","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-43.43233587048019,"y":-509.01834629318716,"strokeColor":"#1e1e1e","backgroundColor":"transparent","width":87.6356201171875,"height":0,"seed":1331047874,"groupIds":[],"frameId":null,"roundness":{"type":2},"boundElements":[],"updated":1711903230983,"link":null,"locked":false,"startBinding":{"elementId":"7NvUWttre1_iP0RrjlGaD","gap":8.68691919543781,"focus":-0.04394714727180993},"endBinding":{"elementId":"hMDU59vmj9-Jv2yKGmFZN","gap":4.4728098084684405,"focus":0.009576591590116791},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[87.6356201171875,0]]},{"type":"arrow","version":580,"versionNonce":1490233630,"isDeleted":false,"id":"m4Nppw3yIba1j3kAhUwIU","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-37.2953774195519,"y":104.8080625499191,"strokeColor":"#1e1e1e","backgroundColor":"transparent","width":67.38597882717323,"height":1.5831635733193252,"seed":151991838,"groupIds":[],"frameId":null,"roundness":{"type":2},"boundElements":[],"updated":1711903230984,"link":null,"locked":false,"startBinding":{"elementId":"f7bmFNOUDfco4rMiDV22Y","gap":17.676245938176976,"focus":-0.11303572697951174},"endBinding":{"elementId":"q129xgDKefpcoEPx50a9z","gap":18.323224581148253,"focus":-0.033029756208706046},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[67.38597882717323,1.5831635733193252]]},{"type":"text","version":71,"versionNonce":144447490,"isDeleted":false,"id":"vHM0SsCw","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-313.92284393310547,"y":-698.305778503418,"strokeColor":"#1e1e1e","backgroundColor":"transparent","width":173.05984497070312,"height":25,"seed":1656539650,"groupIds":[],"frameId":null,"roundness":null,"boundElements":[],"updated":1711902965542,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"Topic (key, value)","rawText":"Topic (key, value)","textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"Topic (key, value)","lineHeight":1.25},{"type":"text","version":190,"versionNonce":745356546,"isDeleted":false,"id":"9V0YI39C","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":170.10948944091797,"y":-706.5700607299805,"strokeColor":"#1e1e1e","backgroundColor":"transparent","width":68.03994750976562,"height":25,"seed":693337986,"groupIds":[],"frameId":null,"roundness":null,"boundElements":[],"updated":1711903143072,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"KTable","rawText":"KTable","textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"KTable","lineHeight":1.25},{"type":"rectangle","version":705,"versionNonce":1686064478,"isDeleted":false,"id":"VvgFNeQOBZPsIZu36XMdB","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-383.2405514666054,"y":509.57220141226276,"strokeColor":"#1971c2","backgroundColor":"transparent","width":325.8948974609375,"height":131.45343017578125,"seed":1919039518,"groupIds":[],"frameId":null,"roundness":{"type":3},"boundElements":[{"type":"text","id":"RbLxQvsb"},{"id":"SpPZw5J6pO4Ieoj-m91Jl","type":"arrow"}],"updated":1711903229259,"link":null,"locked":false},{"type":"text","version":676,"versionNonce":862283358,"isDeleted":false,"id":"RbLxQvsb","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-267.1230740496132,"y":562.7989165001534,"strokeColor":"#1971c2","backgroundColor":"transparent","width":93.65994262695312,"height":25,"seed":534873182,"groupIds":[],"frameId":null,"roundness":null,"boundElements":[],"updated":1711903196413,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"Marc, null","rawText":"Marc, null","textAlign":"center","verticalAlign":"middle","containerId":"VvgFNeQOBZPsIZu36XMdB","originalText":"Marc, null","lineHeight":1.25},{"type":"rectangle","version":574,"versionNonce":2089451010,"isDeleted":false,"id":"aXZjHm3lBsoHCoiHJpQrt","fillStyle":"solid","strokeWidth":2,"strokeStyle":"dashed","roughness":1,"opacity":100,"angle":0,"x":40.712299104467434,"y":504.2336746960083,"strokeColor":"#1971c2","backgroundColor":"transparent","width":325.8948974609375,"height":131.45343017578125,"seed":2003299778,"groupIds":[],"frameId":null,"roundness":{"type":3},"boundElements":[{"type":"text","id":"GMNLTLJN"},{"id":"SpPZw5J6pO4Ieoj-m91Jl","type":"arrow"}],"updated":1711903236261,"link":null,"locked":false},{"type":"text","version":568,"versionNonce":1481600450,"isDeleted":false,"id":"GMNLTLJN","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":121.24981283737759,"y":557.4603897838989,"strokeColor":"#1971c2","backgroundColor":"transparent","width":164.8198699951172,"height":25,"seed":1030284674,"groupIds":[],"frameId":null,"roundness":null,"boundElements":[],"updated":1711903236261,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"Marc is Deleted!","rawText":"Marc is Deleted!","textAlign":"center","verticalAlign":"middle","containerId":"aXZjHm3lBsoHCoiHJpQrt","originalText":"Marc is Deleted!","lineHeight":1.25},{"type":"arrow","version":710,"versionNonce":1023173954,"isDeleted":false,"id":"SpPZw5J6pO4Ieoj-m91Jl","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-50.90029382652179,"y":570.9087231415926,"strokeColor":"#1e1e1e","backgroundColor":"transparent","width":74.35623467880956,"height":1.0735544502331322,"seed":207443166,"groupIds":[],"frameId":null,"roundness":{"type":2},"boundElements":[],"updated":1711903236262,"link":null,"locked":false,"startBinding":{"elementId":"VvgFNeQOBZPsIZu36XMdB","gap":6.445360179146064,"focus":-0.09957741665400636},"endBinding":{"elementId":"aXZjHm3lBsoHCoiHJpQrt","gap":17.256358252179666,"focus":-0.06791587139385984},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[74.35623467880956,1.0735544502331322]]},{"type":"rectangle","version":381,"versionNonce":433032706,"isDeleted":false,"id":"WhwZN8nKAzB0YhLKZOfS4","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":41.982384904786045,"y":359.6849268783695,"strokeColor":"#2f9e44","backgroundColor":"transparent","width":325.8948974609375,"height":131.45343017578125,"seed":1907912322,"groupIds":[],"frameId":null,"roundness":{"type":3},"boundElements":[{"type":"text","id":"zo6d6Ksw"}],"updated":1711903232880,"link":null,"locked":false},{"type":"text","version":343,"versionNonce":712146370,"isDeleted":false,"id":"zo6d6Ksw","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":168.36985896484464,"y":412.9116419662601,"strokeColor":"#2f9e44","backgroundColor":"transparent","width":73.11994934082031,"height":25,"seed":1131105858,"groupIds":[],"frameId":null,"roundness":null,"boundElements":[],"updated":1711903232880,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"Alice, 2","rawText":"Alice, 2","textAlign":"center","verticalAlign":"middle","containerId":"WhwZN8nKAzB0YhLKZOfS4","originalText":"Alice, 2","lineHeight":1.25}],"appState":{"theme":"dark","viewBackgroundColor":"#ffffff","currentItemStrokeColor":"#1971c2","currentItemBackgroundColor":"transparent","currentItemFillStyle":"solid","currentItemStrokeWidth":2,"currentItemStrokeStyle":"dashed","currentItemRoughness":1,"currentItemOpacity":100,"currentItemFontFamily":1,"currentItemFontSize":20,"currentItemTextAlign":"left","currentItemStartArrowhead":null,"currentItemEndArrowhead":"arrow","scrollX":535.7918725550853,"scrollY":461.42403795040735,"zoom":{"value":1.3096683018297086},"currentItemRoundness":"round","gridSize":null,"gridColor":{"Bold":"#C9C9C9FF","Regular":"#EDEDEDFF"},"currentStrokeOptions":null,"previousGridSize":null,"frameRendering":{"enabled":true,"clip":true,"name":true,"outline":true}},"files":{}};InitialData.scrollToContent=true;App=()=>{const e=React.useRef(null),t=React.useRef(null),[n,i]=React.useState({width:void 0,height:void 0});return React.useEffect(()=>{i({width:t.current.getBoundingClientRect().width,height:t.current.getBoundingClientRect().height});const e=()=>{i({width:t.current.getBoundingClientRect().width,height:t.current.getBoundingClientRect().height})};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[t]),React.createElement(React.Fragment,null,React.createElement("div",{className:"excalidraw-wrapper",ref:t},React.createElement(ExcalidrawLib.Excalidraw,{ref:e,width:n.width,height:n.height,initialData:InitialData,viewModeEnabled:!0,zenModeEnabled:!0,gridModeEnabled:!1})))},excalidrawWrapper=document.getElementById("Apache_Kafka_Series_-_Learn_Apache_Kafka_for_Beginners_v3_-_202302211109_202403311138excalidraw.md2");ReactDOM.render(React.createElement(App),excalidrawWrapper);})();</script>

When should I use KStream vs KTable?

- KStream
	- reading from a topic that's not compacted
	- If new data is partial information/transactional
- KTable
	- reading from a topic that's log-compacted (aggregations)
	- More if you need a structure that's like a database table where every update is self sufficient (eg total bank balance)

## Stateless vs Stateful Operations

- Stateless means that the result of a transformation only depends on the data-point you process
	- EG multiply value by 2 because it doesn't need memory of the past to be achieved
- Stateful means that the result of a transformation also depends on an external information
	- Count operation is stateful because your app needs to know what happened since it started running in order to know the computation result

## MapValues / Map

Takes one record and produces one record

- MapValues
	- Is only affecting values
	- == does not change keys
	- == does not trigger a repartition
	- For KStreams and KTables
- Map
	- Affects both keys and values
	- Triggers a re-partition
	- For KStreams only


>[!WARNING]  
>Didn't really talk about Map much, MapValues is closer to what you're used to

## Filter / FilterNot

Takes one record and produces zero or one record

- Filter
	- Does not change keys / values
	- does not trigger a repartition
	- For KSTreams and KTables
- FilterNot
	- Inverse of Filter

## FlatMapValues / FlatMap

Takes one record and produces zero, one or more records

- FlatMapValues
	- Does not change keys
	- == does not trigger a repartition
	- For KSTreams only
- FlatMap
	- Changes keys
	- == triggers a repartition
	- For KStreams only

## KStream Branch

- Branch a KStream based on one or more predicates
- Predicates are evaluated in order, if no matches, records are dropped
- You get multiple KStreams as a result

## KStream SelectKey

- Assigns a new Key to the record (from old key and value)
- == marks the data for repartitioning
- Best practice to isolate that transformation to know exactly where the partitioning happens

## Reading From Kafka

You can read a topic as a KSTream a KTable or a GlobalKTable

GlobalKTable is basically the same as KTable

## Writing to Kafka

- You can write any KSTream or KTable back to KAfka
- If you write a KTable back to Kafka, think about creating a log compacted topic
- To: Terminal operation - write the records to a topic
- Through: write to a topic and get a stream / table from the topic
## Streams Marked for repartition

- As soon as an operation can possibly change the key, the stream will be marked for repartition:
	- Map
	- FlatMap
	- SelectKey
- If you don't need to repartition use these instead:
	- MapValues
	- FlatMapValues
- Repartitioning is done seamlessly but will incur performance overhead

## Log Compaction

- Ensure that the log contains at least the last known value for a specific key within a partition
- Very useful if we just require a snapshot instead of our full history
- Only keep the latest 'update' for a key in the log
- Order of messages is maintained
- Offset is never changed, offsets are just skipped if a message is missing
- Deleted records can still be seen by consumers for a period of `delete.retention.ms` (default of 24 hours)

Does not:

- Prevent you from pushing duplicate data to Kafka
- Prevent you from reading duplicate data from Kafka
- guarantee that Log compaction will complete successfully every time and can fail

## KStream and KTables Duality

- A stream can be considered a changelog of a table, where each data record in the stream captures a state change of the table
- A table can be considered a snapshot of a stream, at a point in time

# KStreams and KTables Simple Operations (Stateless)

## KStream And KTables

### Kstreams

- All inserts
- Similar to a log
- Infinite
- Unbounded data streams

<div id="Apache_Kafka_Series_-_Learn_Apache_Kafka_for_Beginners_v3_-_202302211109_202403311133excalidraw.md3"></div><script>(function(){const InitialData={"type":"excalidraw","version":2,"source":"https://github.com/zsviczian/obsidian-excalidraw-plugin/releases/tag/2.0.26","elements":[{"id":"7NvUWttre1_iP0RrjlGaD","type":"rectangle","x":-378.01415252685547,"y":-571.856559753418,"width":325.8948974609375,"height":131.45343017578125,"angle":0,"strokeColor":"#2f9e44","backgroundColor":"transparent","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"groupIds":[],"frameId":null,"roundness":{"type":3},"seed":601179714,"version":138,"versionNonce":1835017950,"isDeleted":false,"boundElements":[{"type":"text","id":"lQPymulA"},{"id":"1R03Lf-nIobUJmEdEH6bN","type":"arrow"}],"updated":1711902984995,"link":null,"locked":false},{"id":"lQPymulA","type":"text","x":-247.21668243408203,"y":-518.6298446655273,"width":64.29995727539062,"height":25,"angle":0,"strokeColor":"#2f9e44","backgroundColor":"transparent","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"groupIds":[],"frameId":null,"roundness":null,"seed":572557214,"version":98,"versionNonce":893435394,"isDeleted":false,"boundElements":null,"updated":1711902984995,"link":null,"locked":false,"text":"Alice, 1","rawText":"Alice, 1","fontSize":20,"fontFamily":1,"textAlign":"center","verticalAlign":"middle","containerId":"7NvUWttre1_iP0RrjlGaD","originalText":"Alice, 1","lineHeight":1.25},{"type":"rectangle","version":448,"versionNonce":423031518,"isDeleted":false,"id":"ep67PXTqw4PTUwZe2wLLI","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-380.8188705444336,"y":-182.30403900146484,"strokeColor":"#1971c2","backgroundColor":"transparent","width":325.8948974609375,"height":131.45343017578125,"seed":693247490,"groupIds":[],"frameId":null,"roundness":{"type":3},"boundElements":[{"type":"text","id":"n9pjAwoO"},{"id":"haKSET8YQDVgbLxu_ehrZ","type":"arrow"}],"updated":1711902997680,"link":null,"locked":false},{"type":"text","version":416,"versionNonce":1775298334,"isDeleted":false,"id":"n9pjAwoO","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-255.49140167236328,"y":-129.07732391357422,"strokeColor":"#1971c2","backgroundColor":"transparent","width":75.23995971679688,"height":25,"seed":1260588482,"groupIds":[],"frameId":null,"roundness":null,"boundElements":[],"updated":1711902997680,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"Marc, 4","rawText":"Marc, 4","textAlign":"center","verticalAlign":"middle","containerId":"ep67PXTqw4PTUwZe2wLLI","originalText":"Marc, 4","lineHeight":1.25},{"type":"rectangle","version":355,"versionNonce":463802754,"isDeleted":false,"id":"f7bmFNOUDfco4rMiDV22Y","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-398.2921371459961,"y":322.90384674072266,"strokeColor":"#2f9e44","backgroundColor":"transparent","width":325.8948974609375,"height":131.45343017578125,"seed":1939400834,"groupIds":[],"frameId":null,"roundness":{"type":3},"boundElements":[{"type":"text","id":"ozOIJ0tY"},{"id":"m4Nppw3yIba1j3kAhUwIU","type":"arrow"}],"updated":1711903009370,"link":null,"locked":false},{"type":"text","version":325,"versionNonce":705707934,"isDeleted":false,"id":"ozOIJ0tY","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-271.9046630859375,"y":376.1305618286133,"strokeColor":"#2f9e44","backgroundColor":"transparent","width":73.11994934082031,"height":25,"seed":1730971714,"groupIds":[],"frameId":null,"roundness":null,"boundElements":[],"updated":1711903009370,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"Alice, 2","rawText":"Alice, 2","textAlign":"center","verticalAlign":"middle","containerId":"f7bmFNOUDfco4rMiDV22Y","originalText":"Alice, 2","lineHeight":1.25},{"id":"KqbGBlkvau2D2hV5hdSpG","type":"line","x":-12.865776062011719,"y":-723.474479675293,"width":0,"height":1238.765869140625,"angle":0,"strokeColor":"#1e1e1e","backgroundColor":"transparent","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"groupIds":[],"frameId":null,"roundness":{"type":2},"seed":1198261250,"version":267,"versionNonce":483872990,"isDeleted":false,"boundElements":null,"updated":1711902936383,"link":null,"locked":false,"points":[[0,0],[0,1238.765869140625]],"lastCommittedPoint":null,"startBinding":null,"endBinding":null,"startArrowhead":null,"endArrowhead":null},{"type":"rectangle","version":308,"versionNonce":192683714,"isDeleted":false,"id":"hMDU59vmj9-Jv2yKGmFZN","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":48.67609405517578,"y":-574.1156234741211,"strokeColor":"#2f9e44","backgroundColor":"transparent","width":325.8948974609375,"height":131.45343017578125,"seed":910799070,"groupIds":[],"frameId":null,"roundness":{"type":3},"boundElements":[{"type":"text","id":"Up245k6Y"},{"id":"1R03Lf-nIobUJmEdEH6bN","type":"arrow"}],"updated":1711902981858,"link":null,"locked":false},{"type":"text","version":268,"versionNonce":283879006,"isDeleted":false,"id":"Up245k6Y","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":179.47356414794922,"y":-520.8889083862305,"strokeColor":"#2f9e44","backgroundColor":"transparent","width":64.29995727539062,"height":25,"seed":299623710,"groupIds":[],"frameId":null,"roundness":null,"boundElements":[],"updated":1711902981858,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"Alice, 1","rawText":"Alice, 1","textAlign":"center","verticalAlign":"middle","containerId":"hMDU59vmj9-Jv2yKGmFZN","originalText":"Alice, 1","lineHeight":1.25},{"type":"rectangle","version":237,"versionNonce":770043422,"isDeleted":false,"id":"PN7T9UyfKPILqPzyODRat","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":43.84052276611328,"y":-322.3434066772461,"strokeColor":"#2f9e44","backgroundColor":"transparent","width":325.8948974609375,"height":131.45343017578125,"seed":1924329282,"groupIds":[],"frameId":null,"roundness":{"type":3},"boundElements":[{"type":"text","id":"Xc5qxyFa"},{"id":"haKSET8YQDVgbLxu_ehrZ","type":"arrow"}],"updated":1711903004666,"link":null,"locked":false},{"type":"text","version":197,"versionNonce":1568569950,"isDeleted":false,"id":"Xc5qxyFa","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":174.63799285888672,"y":-269.11669158935547,"strokeColor":"#2f9e44","backgroundColor":"transparent","width":64.29995727539062,"height":25,"seed":1792521986,"groupIds":[],"frameId":null,"roundness":null,"boundElements":[],"updated":1711903004666,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"Alice, 1","rawText":"Alice, 1","textAlign":"center","verticalAlign":"middle","containerId":"PN7T9UyfKPILqPzyODRat","originalText":"Alice, 1","lineHeight":1.25},{"type":"rectangle","version":415,"versionNonce":132868162,"isDeleted":false,"id":"cF3QEOycWHXUSUZh7ONTr","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":44.91767120361328,"y":-177.6167221069336,"strokeColor":"#1971c2","backgroundColor":"transparent","width":325.8948974609375,"height":131.45343017578125,"seed":558651074,"groupIds":[],"frameId":null,"roundness":{"type":3},"boundElements":[{"type":"text","id":"EpufPdvz"},{"id":"haKSET8YQDVgbLxu_ehrZ","type":"arrow"}],"updated":1711903001641,"link":null,"locked":false},{"type":"text","version":385,"versionNonce":1292874974,"isDeleted":false,"id":"EpufPdvz","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":170.2451400756836,"y":-124.39000701904297,"strokeColor":"#1971c2","backgroundColor":"transparent","width":75.23995971679688,"height":25,"seed":1624780418,"groupIds":[],"frameId":null,"roundness":null,"boundElements":[],"updated":1711903001641,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"Marc, 4","rawText":"Marc, 4","textAlign":"center","verticalAlign":"middle","containerId":"cF3QEOycWHXUSUZh7ONTr","originalText":"Marc, 4","lineHeight":1.25},{"type":"rectangle","version":306,"versionNonce":1842057538,"isDeleted":false,"id":"q129xgDKefpcoEPx50a9z","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":48.41382598876953,"y":42.625892639160156,"strokeColor":"#2f9e44","backgroundColor":"transparent","width":325.8948974609375,"height":131.45343017578125,"seed":1474225858,"groupIds":[],"frameId":null,"roundness":{"type":3},"boundElements":[{"type":"text","id":"KJuEewCr"}],"updated":1711903009370,"link":null,"locked":false},{"type":"text","version":267,"versionNonce":1398971358,"isDeleted":false,"id":"KJuEewCr","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":179.21129608154297,"y":95.85260772705078,"strokeColor":"#2f9e44","backgroundColor":"transparent","width":64.29995727539062,"height":25,"seed":1184415362,"groupIds":[],"frameId":null,"roundness":null,"boundElements":[],"updated":1711903009370,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"Alice, 1","rawText":"Alice, 1","textAlign":"center","verticalAlign":"middle","containerId":"q129xgDKefpcoEPx50a9z","originalText":"Alice, 1","lineHeight":1.25},{"type":"rectangle","version":487,"versionNonce":1551663262,"isDeleted":false,"id":"VF8GD--4MSg2oVQZCt3KU","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":44.92664337158203,"y":187.35257720947266,"strokeColor":"#1971c2","backgroundColor":"transparent","width":325.8948974609375,"height":131.45343017578125,"seed":935435842,"groupIds":[],"frameId":null,"roundness":{"type":3},"boundElements":[{"type":"text","id":"f6oyPjwK"}],"updated":1711903011539,"link":null,"locked":false},{"type":"text","version":458,"versionNonce":402645058,"isDeleted":false,"id":"f6oyPjwK","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":170.25411224365234,"y":240.57929229736328,"strokeColor":"#1971c2","backgroundColor":"transparent","width":75.23995971679688,"height":25,"seed":406357506,"groupIds":[],"frameId":null,"roundness":null,"boundElements":[],"updated":1711903011539,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"Marc, 4","rawText":"Marc, 4","textAlign":"center","verticalAlign":"middle","containerId":"VF8GD--4MSg2oVQZCt3KU","originalText":"Marc, 4","lineHeight":1.25},{"type":"rectangle","version":404,"versionNonce":2123110658,"isDeleted":false,"id":"-9Ia6WlBEBNLJY4h6QJdb","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":42.66419219970703,"y":328.7931900024414,"strokeColor":"#2f9e44","backgroundColor":"transparent","width":325.8948974609375,"height":131.45343017578125,"seed":1753718274,"groupIds":[],"frameId":null,"roundness":{"type":3},"boundElements":[{"type":"text","id":"zPOwGpKN"},{"id":"m4Nppw3yIba1j3kAhUwIU","type":"arrow"}],"updated":1711903009370,"link":null,"locked":false},{"type":"text","version":374,"versionNonce":312438814,"isDeleted":false,"id":"zPOwGpKN","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":169.05166625976562,"y":382.01990509033203,"strokeColor":"#2f9e44","backgroundColor":"transparent","width":73.11994934082031,"height":25,"seed":128486850,"groupIds":[],"frameId":null,"roundness":null,"boundElements":[],"updated":1711903009370,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"Alice, 2","rawText":"Alice, 2","textAlign":"center","verticalAlign":"middle","containerId":"-9Ia6WlBEBNLJY4h6QJdb","originalText":"Alice, 2","lineHeight":1.25},{"id":"haKSET8YQDVgbLxu_ehrZ","type":"arrow","x":-46.64196014404297,"y":-114.69274341115036,"width":81.2454833984375,"height":0.05057638634693262,"angle":0,"strokeColor":"#1e1e1e","backgroundColor":"transparent","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"groupIds":[],"frameId":null,"roundness":{"type":2},"seed":413097886,"version":218,"versionNonce":1358706590,"isDeleted":false,"boundElements":null,"updated":1711902997680,"link":null,"locked":false,"points":[[0,0],[81.2454833984375,0.05057638634693262]],"lastCommittedPoint":null,"startBinding":{"elementId":"ep67PXTqw4PTUwZe2wLLI","focus":0.0297072465512409,"gap":8.282012939453125},"endBinding":{"elementId":"cF3QEOycWHXUSUZh7ONTr","focus":0.04016977983307118,"gap":10.31414794921875},"startArrowhead":null,"endArrowhead":"arrow"},{"type":"arrow","version":152,"versionNonce":166301662,"isDeleted":false,"id":"1R03Lf-nIobUJmEdEH6bN","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-43.43233587048019,"y":-509.01834629318716,"strokeColor":"#1e1e1e","backgroundColor":"transparent","width":87.6356201171875,"height":0,"seed":1331047874,"groupIds":[],"frameId":null,"roundness":{"type":2},"boundElements":[],"updated":1711902966926,"link":null,"locked":false,"startBinding":{"elementId":"7NvUWttre1_iP0RrjlGaD","gap":8.68691919543781,"focus":-0.04394714727180993},"endBinding":{"elementId":"hMDU59vmj9-Jv2yKGmFZN","gap":4.4728098084684405,"focus":0.009576591590116791},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[87.6356201171875,0]]},{"type":"arrow","version":123,"versionNonce":571191518,"isDeleted":false,"id":"m4Nppw3yIba1j3kAhUwIU","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-53.91750432751141,"y":388.98862234389577,"strokeColor":"#1e1e1e","backgroundColor":"transparent","width":83.98413085937494,"height":0.142644540940978,"seed":151991838,"groupIds":[],"frameId":null,"roundness":{"type":2},"boundElements":[],"updated":1711902966927,"link":null,"locked":false,"startBinding":{"elementId":"f7bmFNOUDfco4rMiDV22Y","gap":18.479735357547185,"focus":-0.001409376805368635},"endBinding":{"elementId":"-9Ia6WlBEBNLJY4h6QJdb","gap":12.59756566784344,"focus":0.07712442597813057},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[83.98413085937494,0.142644540940978]]},{"id":"vHM0SsCw","type":"text","x":-313.92284393310547,"y":-698.305778503418,"width":173.05984497070312,"height":25,"angle":0,"strokeColor":"#1e1e1e","backgroundColor":"transparent","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"groupIds":[],"frameId":null,"roundness":null,"seed":1656539650,"version":71,"versionNonce":144447490,"isDeleted":false,"boundElements":null,"updated":1711902965542,"link":null,"locked":false,"text":"Topic (key, value)","rawText":"Topic (key, value)","fontSize":20,"fontFamily":1,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"Topic (key, value)","lineHeight":1.25},{"type":"text","version":184,"versionNonce":1653244446,"isDeleted":false,"id":"9V0YI39C","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":170.10948944091797,"y":-706.5700607299805,"strokeColor":"#1e1e1e","backgroundColor":"transparent","width":81.25993347167969,"height":25,"seed":693337986,"groupIds":[],"frameId":null,"roundness":null,"boundElements":[],"updated":1711902972701,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"KStream","rawText":"KStream","textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"KStream","lineHeight":1.25}],"appState":{"theme":"dark","viewBackgroundColor":"#ffffff","currentItemStrokeColor":"#1971c2","currentItemBackgroundColor":"transparent","currentItemFillStyle":"solid","currentItemStrokeWidth":2,"currentItemStrokeStyle":"solid","currentItemRoughness":1,"currentItemOpacity":100,"currentItemFontFamily":1,"currentItemFontSize":20,"currentItemTextAlign":"left","currentItemStartArrowhead":null,"currentItemEndArrowhead":"arrow","scrollX":712.781005859375,"scrollY":1022.4317626953125,"zoom":{"value":1},"currentItemRoundness":"round","gridSize":null,"gridColor":{"Bold":"#C9C9C9FF","Regular":"#EDEDEDFF"},"currentStrokeOptions":null,"previousGridSize":null,"frameRendering":{"enabled":true,"clip":true,"name":true,"outline":true}},"files":{}};InitialData.scrollToContent=true;App=()=>{const e=React.useRef(null),t=React.useRef(null),[n,i]=React.useState({width:void 0,height:void 0});return React.useEffect(()=>{i({width:t.current.getBoundingClientRect().width,height:t.current.getBoundingClientRect().height});const e=()=>{i({width:t.current.getBoundingClientRect().width,height:t.current.getBoundingClientRect().height})};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[t]),React.createElement(React.Fragment,null,React.createElement("div",{className:"excalidraw-wrapper",ref:t},React.createElement(ExcalidrawLib.Excalidraw,{ref:e,width:n.width,height:n.height,initialData:InitialData,viewModeEnabled:!0,zenModeEnabled:!0,gridModeEnabled:!1})))},excalidrawWrapper=document.getElementById("Apache_Kafka_Series_-_Learn_Apache_Kafka_for_Beginners_v3_-_202302211109_202403311133excalidraw.md3");ReactDOM.render(React.createElement(App),excalidrawWrapper);})();</script>


### KTables

- All upserts on non null values
- Deletes on null values
- Similar to a table
- Parallel with log compacted topics

<div id="Apache_Kafka_Series_-_Learn_Apache_Kafka_for_Beginners_v3_-_202302211109_202403311138excalidraw.md4"></div><script>(function(){const InitialData={"type":"excalidraw","version":2,"source":"https://github.com/zsviczian/obsidian-excalidraw-plugin/releases/tag/2.0.26","elements":[{"type":"rectangle","version":138,"versionNonce":1835017950,"isDeleted":false,"id":"7NvUWttre1_iP0RrjlGaD","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-378.01415252685547,"y":-571.856559753418,"strokeColor":"#2f9e44","backgroundColor":"transparent","width":325.8948974609375,"height":131.45343017578125,"seed":601179714,"groupIds":[],"frameId":null,"roundness":{"type":3},"boundElements":[{"type":"text","id":"lQPymulA"},{"id":"1R03Lf-nIobUJmEdEH6bN","type":"arrow"}],"updated":1711902984995,"link":null,"locked":false},{"type":"text","version":98,"versionNonce":893435394,"isDeleted":false,"id":"lQPymulA","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-247.21668243408203,"y":-518.6298446655273,"strokeColor":"#2f9e44","backgroundColor":"transparent","width":64.29995727539062,"height":25,"seed":572557214,"groupIds":[],"frameId":null,"roundness":null,"boundElements":[],"updated":1711902984995,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"Alice, 1","rawText":"Alice, 1","textAlign":"center","verticalAlign":"middle","containerId":"7NvUWttre1_iP0RrjlGaD","originalText":"Alice, 1","lineHeight":1.25},{"type":"rectangle","version":448,"versionNonce":423031518,"isDeleted":false,"id":"ep67PXTqw4PTUwZe2wLLI","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-380.8188705444336,"y":-182.30403900146484,"strokeColor":"#1971c2","backgroundColor":"transparent","width":325.8948974609375,"height":131.45343017578125,"seed":693247490,"groupIds":[],"frameId":null,"roundness":{"type":3},"boundElements":[{"type":"text","id":"n9pjAwoO"},{"id":"haKSET8YQDVgbLxu_ehrZ","type":"arrow"}],"updated":1711902997680,"link":null,"locked":false},{"type":"text","version":416,"versionNonce":1775298334,"isDeleted":false,"id":"n9pjAwoO","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-255.49140167236328,"y":-129.07732391357422,"strokeColor":"#1971c2","backgroundColor":"transparent","width":75.23995971679688,"height":25,"seed":1260588482,"groupIds":[],"frameId":null,"roundness":null,"boundElements":[],"updated":1711902997680,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"Marc, 4","rawText":"Marc, 4","textAlign":"center","verticalAlign":"middle","containerId":"ep67PXTqw4PTUwZe2wLLI","originalText":"Marc, 4","lineHeight":1.25},{"type":"rectangle","version":468,"versionNonce":1629972958,"isDeleted":false,"id":"f7bmFNOUDfco4rMiDV22Y","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-380.86652081866634,"y":42.69998093664185,"strokeColor":"#2f9e44","backgroundColor":"transparent","width":325.8948974609375,"height":131.45343017578125,"seed":1939400834,"groupIds":[],"frameId":null,"roundness":{"type":3},"boundElements":[{"type":"text","id":"ozOIJ0tY"},{"id":"m4Nppw3yIba1j3kAhUwIU","type":"arrow"}],"updated":1711903160192,"link":null,"locked":false},{"type":"text","version":438,"versionNonce":1788509726,"isDeleted":false,"id":"ozOIJ0tY","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-254.47904675860775,"y":95.92669602453248,"strokeColor":"#2f9e44","backgroundColor":"transparent","width":73.11994934082031,"height":25,"seed":1730971714,"groupIds":[],"frameId":null,"roundness":null,"boundElements":[],"updated":1711903160192,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"Alice, 2","rawText":"Alice, 2","textAlign":"center","verticalAlign":"middle","containerId":"f7bmFNOUDfco4rMiDV22Y","originalText":"Alice, 2","lineHeight":1.25},{"type":"line","version":381,"versionNonce":1805599682,"isDeleted":false,"id":"KqbGBlkvau2D2hV5hdSpG","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-12.865776062011719,"y":-723.474479675293,"strokeColor":"#1e1e1e","backgroundColor":"transparent","width":8.704148513061227e-14,"height":1396.1963823596157,"seed":1198261250,"groupIds":[],"frameId":null,"roundness":{"type":2},"boundElements":[],"updated":1711903190505,"link":null,"locked":false,"startBinding":null,"endBinding":null,"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":null,"points":[[0,0],[-8.704148513061227e-14,1396.1963823596157]]},{"type":"rectangle","version":308,"versionNonce":192683714,"isDeleted":false,"id":"hMDU59vmj9-Jv2yKGmFZN","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":48.67609405517578,"y":-574.1156234741211,"strokeColor":"#2f9e44","backgroundColor":"transparent","width":325.8948974609375,"height":131.45343017578125,"seed":910799070,"groupIds":[],"frameId":null,"roundness":{"type":3},"boundElements":[{"type":"text","id":"Up245k6Y"},{"id":"1R03Lf-nIobUJmEdEH6bN","type":"arrow"}],"updated":1711902981858,"link":null,"locked":false},{"type":"text","version":268,"versionNonce":283879006,"isDeleted":false,"id":"Up245k6Y","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":179.47356414794922,"y":-520.8889083862305,"strokeColor":"#2f9e44","backgroundColor":"transparent","width":64.29995727539062,"height":25,"seed":299623710,"groupIds":[],"frameId":null,"roundness":null,"boundElements":[],"updated":1711902981858,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"Alice, 1","rawText":"Alice, 1","textAlign":"center","verticalAlign":"middle","containerId":"hMDU59vmj9-Jv2yKGmFZN","originalText":"Alice, 1","lineHeight":1.25},{"type":"rectangle","version":237,"versionNonce":770043422,"isDeleted":false,"id":"PN7T9UyfKPILqPzyODRat","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":43.84052276611328,"y":-322.3434066772461,"strokeColor":"#2f9e44","backgroundColor":"transparent","width":325.8948974609375,"height":131.45343017578125,"seed":1924329282,"groupIds":[],"frameId":null,"roundness":{"type":3},"boundElements":[{"type":"text","id":"Xc5qxyFa"},{"id":"haKSET8YQDVgbLxu_ehrZ","type":"arrow"}],"updated":1711903004666,"link":null,"locked":false},{"type":"text","version":197,"versionNonce":1568569950,"isDeleted":false,"id":"Xc5qxyFa","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":174.63799285888672,"y":-269.11669158935547,"strokeColor":"#2f9e44","backgroundColor":"transparent","width":64.29995727539062,"height":25,"seed":1792521986,"groupIds":[],"frameId":null,"roundness":null,"boundElements":[],"updated":1711903004666,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"Alice, 1","rawText":"Alice, 1","textAlign":"center","verticalAlign":"middle","containerId":"PN7T9UyfKPILqPzyODRat","originalText":"Alice, 1","lineHeight":1.25},{"type":"rectangle","version":415,"versionNonce":132868162,"isDeleted":false,"id":"cF3QEOycWHXUSUZh7ONTr","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":44.91767120361328,"y":-177.6167221069336,"strokeColor":"#1971c2","backgroundColor":"transparent","width":325.8948974609375,"height":131.45343017578125,"seed":558651074,"groupIds":[],"frameId":null,"roundness":{"type":3},"boundElements":[{"type":"text","id":"EpufPdvz"},{"id":"haKSET8YQDVgbLxu_ehrZ","type":"arrow"}],"updated":1711903001641,"link":null,"locked":false},{"type":"text","version":385,"versionNonce":1292874974,"isDeleted":false,"id":"EpufPdvz","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":170.2451400756836,"y":-124.39000701904297,"strokeColor":"#1971c2","backgroundColor":"transparent","width":75.23995971679688,"height":25,"seed":1624780418,"groupIds":[],"frameId":null,"roundness":null,"boundElements":[],"updated":1711903001641,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"Marc, 4","rawText":"Marc, 4","textAlign":"center","verticalAlign":"middle","containerId":"cF3QEOycWHXUSUZh7ONTr","originalText":"Marc, 4","lineHeight":1.25},{"type":"rectangle","version":307,"versionNonce":1880427998,"isDeleted":false,"id":"q129xgDKefpcoEPx50a9z","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":48.41382598876953,"y":42.625892639160156,"strokeColor":"#2f9e44","backgroundColor":"transparent","width":325.8948974609375,"height":131.45343017578125,"seed":1474225858,"groupIds":[],"frameId":null,"roundness":{"type":3},"boundElements":[{"type":"text","id":"KJuEewCr"},{"id":"m4Nppw3yIba1j3kAhUwIU","type":"arrow"}],"updated":1711903164587,"link":null,"locked":false},{"type":"text","version":269,"versionNonce":1525724702,"isDeleted":false,"id":"KJuEewCr","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":174.80130004882812,"y":95.85260772705078,"strokeColor":"#2f9e44","backgroundColor":"transparent","width":73.11994934082031,"height":25,"seed":1184415362,"groupIds":[],"frameId":null,"roundness":null,"boundElements":[],"updated":1711903172800,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"Alice, 2","rawText":"Alice, 2","textAlign":"center","verticalAlign":"middle","containerId":"q129xgDKefpcoEPx50a9z","originalText":"Alice, 2","lineHeight":1.25},{"type":"rectangle","version":487,"versionNonce":1551663262,"isDeleted":false,"id":"VF8GD--4MSg2oVQZCt3KU","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":44.92664337158203,"y":187.35257720947266,"strokeColor":"#1971c2","backgroundColor":"transparent","width":325.8948974609375,"height":131.45343017578125,"seed":935435842,"groupIds":[],"frameId":null,"roundness":{"type":3},"boundElements":[{"type":"text","id":"f6oyPjwK"}],"updated":1711903011539,"link":null,"locked":false},{"type":"text","version":458,"versionNonce":402645058,"isDeleted":false,"id":"f6oyPjwK","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":170.25411224365234,"y":240.57929229736328,"strokeColor":"#1971c2","backgroundColor":"transparent","width":75.23995971679688,"height":25,"seed":406357506,"groupIds":[],"frameId":null,"roundness":null,"boundElements":[],"updated":1711903011539,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"Marc, 4","rawText":"Marc, 4","textAlign":"center","verticalAlign":"middle","containerId":"VF8GD--4MSg2oVQZCt3KU","originalText":"Marc, 4","lineHeight":1.25},{"type":"arrow","version":234,"versionNonce":112081054,"isDeleted":false,"id":"haKSET8YQDVgbLxu_ehrZ","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-46.64196014404297,"y":-114.58694539865562,"strokeColor":"#1e1e1e","backgroundColor":"transparent","width":81.24548339843747,"height":0.017649653402301624,"seed":413097886,"groupIds":[],"frameId":null,"roundness":{"type":2},"boundElements":[],"updated":1711903230983,"link":null,"locked":false,"startBinding":{"elementId":"ep67PXTqw4PTUwZe2wLLI","gap":8.282012939453125,"focus":0.0297072465512409},"endBinding":{"elementId":"cF3QEOycWHXUSUZh7ONTr","gap":10.31414794921875,"focus":0.04016977983307118},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[81.24548339843747,0.017649653402301624]]},{"type":"arrow","version":168,"versionNonce":257894430,"isDeleted":false,"id":"1R03Lf-nIobUJmEdEH6bN","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-43.43233587048019,"y":-509.01834629318716,"strokeColor":"#1e1e1e","backgroundColor":"transparent","width":87.6356201171875,"height":0,"seed":1331047874,"groupIds":[],"frameId":null,"roundness":{"type":2},"boundElements":[],"updated":1711903230983,"link":null,"locked":false,"startBinding":{"elementId":"7NvUWttre1_iP0RrjlGaD","gap":8.68691919543781,"focus":-0.04394714727180993},"endBinding":{"elementId":"hMDU59vmj9-Jv2yKGmFZN","gap":4.4728098084684405,"focus":0.009576591590116791},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[87.6356201171875,0]]},{"type":"arrow","version":580,"versionNonce":1490233630,"isDeleted":false,"id":"m4Nppw3yIba1j3kAhUwIU","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-37.2953774195519,"y":104.8080625499191,"strokeColor":"#1e1e1e","backgroundColor":"transparent","width":67.38597882717323,"height":1.5831635733193252,"seed":151991838,"groupIds":[],"frameId":null,"roundness":{"type":2},"boundElements":[],"updated":1711903230984,"link":null,"locked":false,"startBinding":{"elementId":"f7bmFNOUDfco4rMiDV22Y","gap":17.676245938176976,"focus":-0.11303572697951174},"endBinding":{"elementId":"q129xgDKefpcoEPx50a9z","gap":18.323224581148253,"focus":-0.033029756208706046},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[67.38597882717323,1.5831635733193252]]},{"type":"text","version":71,"versionNonce":144447490,"isDeleted":false,"id":"vHM0SsCw","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-313.92284393310547,"y":-698.305778503418,"strokeColor":"#1e1e1e","backgroundColor":"transparent","width":173.05984497070312,"height":25,"seed":1656539650,"groupIds":[],"frameId":null,"roundness":null,"boundElements":[],"updated":1711902965542,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"Topic (key, value)","rawText":"Topic (key, value)","textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"Topic (key, value)","lineHeight":1.25},{"type":"text","version":190,"versionNonce":745356546,"isDeleted":false,"id":"9V0YI39C","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":170.10948944091797,"y":-706.5700607299805,"strokeColor":"#1e1e1e","backgroundColor":"transparent","width":68.03994750976562,"height":25,"seed":693337986,"groupIds":[],"frameId":null,"roundness":null,"boundElements":[],"updated":1711903143072,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"KTable","rawText":"KTable","textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"KTable","lineHeight":1.25},{"type":"rectangle","version":705,"versionNonce":1686064478,"isDeleted":false,"id":"VvgFNeQOBZPsIZu36XMdB","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-383.2405514666054,"y":509.57220141226276,"strokeColor":"#1971c2","backgroundColor":"transparent","width":325.8948974609375,"height":131.45343017578125,"seed":1919039518,"groupIds":[],"frameId":null,"roundness":{"type":3},"boundElements":[{"type":"text","id":"RbLxQvsb"},{"id":"SpPZw5J6pO4Ieoj-m91Jl","type":"arrow"}],"updated":1711903229259,"link":null,"locked":false},{"type":"text","version":676,"versionNonce":862283358,"isDeleted":false,"id":"RbLxQvsb","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-267.1230740496132,"y":562.7989165001534,"strokeColor":"#1971c2","backgroundColor":"transparent","width":93.65994262695312,"height":25,"seed":534873182,"groupIds":[],"frameId":null,"roundness":null,"boundElements":[],"updated":1711903196413,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"Marc, null","rawText":"Marc, null","textAlign":"center","verticalAlign":"middle","containerId":"VvgFNeQOBZPsIZu36XMdB","originalText":"Marc, null","lineHeight":1.25},{"type":"rectangle","version":574,"versionNonce":2089451010,"isDeleted":false,"id":"aXZjHm3lBsoHCoiHJpQrt","fillStyle":"solid","strokeWidth":2,"strokeStyle":"dashed","roughness":1,"opacity":100,"angle":0,"x":40.712299104467434,"y":504.2336746960083,"strokeColor":"#1971c2","backgroundColor":"transparent","width":325.8948974609375,"height":131.45343017578125,"seed":2003299778,"groupIds":[],"frameId":null,"roundness":{"type":3},"boundElements":[{"type":"text","id":"GMNLTLJN"},{"id":"SpPZw5J6pO4Ieoj-m91Jl","type":"arrow"}],"updated":1711903236261,"link":null,"locked":false},{"type":"text","version":568,"versionNonce":1481600450,"isDeleted":false,"id":"GMNLTLJN","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":121.24981283737759,"y":557.4603897838989,"strokeColor":"#1971c2","backgroundColor":"transparent","width":164.8198699951172,"height":25,"seed":1030284674,"groupIds":[],"frameId":null,"roundness":null,"boundElements":[],"updated":1711903236261,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"Marc is Deleted!","rawText":"Marc is Deleted!","textAlign":"center","verticalAlign":"middle","containerId":"aXZjHm3lBsoHCoiHJpQrt","originalText":"Marc is Deleted!","lineHeight":1.25},{"type":"arrow","version":710,"versionNonce":1023173954,"isDeleted":false,"id":"SpPZw5J6pO4Ieoj-m91Jl","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":-50.90029382652179,"y":570.9087231415926,"strokeColor":"#1e1e1e","backgroundColor":"transparent","width":74.35623467880956,"height":1.0735544502331322,"seed":207443166,"groupIds":[],"frameId":null,"roundness":{"type":2},"boundElements":[],"updated":1711903236262,"link":null,"locked":false,"startBinding":{"elementId":"VvgFNeQOBZPsIZu36XMdB","gap":6.445360179146064,"focus":-0.09957741665400636},"endBinding":{"elementId":"aXZjHm3lBsoHCoiHJpQrt","gap":17.256358252179666,"focus":-0.06791587139385984},"lastCommittedPoint":null,"startArrowhead":null,"endArrowhead":"arrow","points":[[0,0],[74.35623467880956,1.0735544502331322]]},{"type":"rectangle","version":381,"versionNonce":433032706,"isDeleted":false,"id":"WhwZN8nKAzB0YhLKZOfS4","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":41.982384904786045,"y":359.6849268783695,"strokeColor":"#2f9e44","backgroundColor":"transparent","width":325.8948974609375,"height":131.45343017578125,"seed":1907912322,"groupIds":[],"frameId":null,"roundness":{"type":3},"boundElements":[{"type":"text","id":"zo6d6Ksw"}],"updated":1711903232880,"link":null,"locked":false},{"type":"text","version":343,"versionNonce":712146370,"isDeleted":false,"id":"zo6d6Ksw","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"angle":0,"x":168.36985896484464,"y":412.9116419662601,"strokeColor":"#2f9e44","backgroundColor":"transparent","width":73.11994934082031,"height":25,"seed":1131105858,"groupIds":[],"frameId":null,"roundness":null,"boundElements":[],"updated":1711903232880,"link":null,"locked":false,"fontSize":20,"fontFamily":1,"text":"Alice, 2","rawText":"Alice, 2","textAlign":"center","verticalAlign":"middle","containerId":"WhwZN8nKAzB0YhLKZOfS4","originalText":"Alice, 2","lineHeight":1.25}],"appState":{"theme":"dark","viewBackgroundColor":"#ffffff","currentItemStrokeColor":"#1971c2","currentItemBackgroundColor":"transparent","currentItemFillStyle":"solid","currentItemStrokeWidth":2,"currentItemStrokeStyle":"dashed","currentItemRoughness":1,"currentItemOpacity":100,"currentItemFontFamily":1,"currentItemFontSize":20,"currentItemTextAlign":"left","currentItemStartArrowhead":null,"currentItemEndArrowhead":"arrow","scrollX":535.7918725550853,"scrollY":461.42403795040735,"zoom":{"value":1.3096683018297086},"currentItemRoundness":"round","gridSize":null,"gridColor":{"Bold":"#C9C9C9FF","Regular":"#EDEDEDFF"},"currentStrokeOptions":null,"previousGridSize":null,"frameRendering":{"enabled":true,"clip":true,"name":true,"outline":true}},"files":{}};InitialData.scrollToContent=true;App=()=>{const e=React.useRef(null),t=React.useRef(null),[n,i]=React.useState({width:void 0,height:void 0});return React.useEffect(()=>{i({width:t.current.getBoundingClientRect().width,height:t.current.getBoundingClientRect().height});const e=()=>{i({width:t.current.getBoundingClientRect().width,height:t.current.getBoundingClientRect().height})};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[t]),React.createElement(React.Fragment,null,React.createElement("div",{className:"excalidraw-wrapper",ref:t},React.createElement(ExcalidrawLib.Excalidraw,{ref:e,width:n.width,height:n.height,initialData:InitialData,viewModeEnabled:!0,zenModeEnabled:!0,gridModeEnabled:!1})))},excalidrawWrapper=document.getElementById("Apache_Kafka_Series_-_Learn_Apache_Kafka_for_Beginners_v3_-_202302211109_202403311138excalidraw.md4");ReactDOM.render(React.createElement(App),excalidrawWrapper);})();</script>

When should I use KStream vs KTable?

- KStream
	- reading from a topic that's not compacted
	- If new data is partial information/transactional
- KTable
	- reading from a topic that's log-compacted (aggregations)
	- More if you need a structure that's like a database table where every update is self sufficient (eg total bank balance)

## Stateless vs Stateful Operations

- Stateless means that the result of a transformation only depends on the data-point you process
	- EG multiply value by 2 because it doesn't need memory of the past to be achieved
- Stateful means that the result of a transformation also depends on an external information
	- Count operation is stateful because your app needs to know what happened since it started running in order to know the computation result

## MapValues / Map

Takes one record and produces one record

- MapValues
	- Is only affecting values
	- == does not change keys
	- == does not trigger a repartition
	- For KStreams and KTables
- Map
	- Affects both keys and values
	- Triggers a re-partition
	- For KStreams only


>[!WARNING]  
>Didn't really talk about Map much, MapValues is closer to what you're used to

## Filter / FilterNot

Takes one record and produces zero or one record

- Filter
	- Does not change keys / values
	- does not trigger a repartition
	- For KSTreams and KTables
- FilterNot
	- Inverse of Filter

## FlatMapValues / FlatMap

Takes one record and produces zero, one or more records

- FlatMapValues
	- Does not change keys
	- == does not trigger a repartition
	- For KSTreams only
- FlatMap
	- Changes keys
	- == triggers a repartition
	- For KStreams only

## KStream Branch

- Branch a KStream based on one or more predicates
- Predicates are evaluated in order, if no matches, records are dropped
- You get multiple KStreams as a result

## KStream SelectKey

- Assigns a new Key to the record (from old key and value)
- == marks the data for repartitioning
- Best practice to isolate that transformation to know exactly where the partitioning happens

## Reading From Kafka

You can read a topic as a KSTream a KTable or a GlobalKTable

GlobalKTable is basically the same as KTable

## Writing to Kafka

- You can write any KSTream or KTable back to KAfka
- If you write a KTable back to Kafka, think about creating a log compacted topic
- To: Terminal operation - write the records to a topic
- Through: write to a topic and get a stream / table from the topic
## Streams Marked for repartition

- As soon as an operation can possibly change the key, the stream will be marked for repartition:
	- Map
	- FlatMap
	- SelectKey
- If you don't need to repartition use these instead:
	- MapValues
	- FlatMapValues
- Repartitioning is done seamlessly but will incur performance overhead

## Log Compaction

- Ensure that the log contains at least the last known value for a specific key within a partition
- Very useful if we just require a snapshot instead of our full history
- Only keep the latest 'update' for a key in the log
- Order of messages is maintained
- Offset is never changed, offsets are just skipped if a message is missing
- Deleted records can still be seen by consumers for a period of `delete.retention.ms` (default of 24 hours)

Does not:

- Prevent you from pushing duplicate data to Kafka
- Prevent you from reading duplicate data from Kafka
- guarantee that Log compaction will complete successfully every time and can fail

## KStream and KTables Duality

- A stream can be considered a changelog of a table, where each data record in the stream captures a state change of the table
- A table can be considered a snapshot of a stream, at a point in time

# References


# Flashcards